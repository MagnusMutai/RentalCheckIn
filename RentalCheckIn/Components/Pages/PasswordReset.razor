@page "/reset-password"
@inherits PasswordResetBase

<h3>Set New Password</h3>

@if (IsPasswordResetSuccessful)
{
    <p>Your password has been successfully reset. <a @onclick="@(() => NavigationManager.NavigateTo("/login"))">Go to login page</a>.</p>
}
else
{
    <EditForm Model="resetPasswordModel" OnValidSubmit="HandleResetPassword">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="form-group">
            <label for="newPassword">New Password</label>
            <InputText @bind-Value="resetPasswordModel.NewPassword" id="newPassword" type="password" class="form-control" />
            <ValidationMessage For="@(() => resetPasswordModel.NewPassword)" />
        </div>

        <div class="form-group">
            <label for="confirmPassword">Confirm New Password</label>
            <InputText @bind-Value="resetPasswordModel.ConfirmPassword" id="confirmPassword" type="password" class="form-control" />
            <ValidationMessage For="@(() => resetPasswordModel.ConfirmPassword)" />
        </div>

        <button type="submit" class="btn btn-primary" disabled="@(IsLoading)">Save New Password</button>
    </EditForm>

    @if (!string.IsNullOrEmpty(ErrorMessage))
    {
        <p class="text-danger">@ErrorMessage</p>
    }
}

@code {

}